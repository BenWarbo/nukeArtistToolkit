#http://www.vfxwiki.org vb0.1 mrafs
#licence: https://github.com/vfxwiki/nukeArtistToolkit
set cut_paste_input [stack 0]
version 7.0 v9
push $cut_paste_input
Group {
 name Keychew
 selected true
 xpos 48267
 ypos 1287
 addUserKnob {20 User l "Key Chew"}
 addUserKnob {26 line l "" +STARTLINE}
 addUserKnob {41 from0 l channel T Copy1.from0}
 addUserKnob {41 Chew T Blur1.Chew}
 addUserKnob {41 size l blur T Blur11.size}
 addUserKnob {41 crop l "crop to format" -STARTLINE T Blur11.crop}
 addUserKnob {26 ""}
 addUserKnob {41 edgeMatte l "edge matte" T SwitchEdge.edgeMatte}
 addUserKnob {41 outside T ColorLookupEdge1.outside}
 addUserKnob {41 inside -STARTLINE T ColorLookupEdge1.inside}
}
 Input {
  inputs 0
  name Input1
  xpos -165
  ypos -352
 }
set N26ff3330 [stack 0]
 Dot {
  name Dot2
  xpos -264
  ypos -340
 }
 Dot {
  name Dot1
  xpos -274
  ypos -257
 }
set N26ff3a10 [stack 0]
push $N26ff3330
 Copy {
  inputs 2
  from0 {{{Copy1.to0}}}
  to0 rgba.alpha
  name Copy2
  xpos -165
  ypos -273
 }
 Blur {
  channels alpha
  size {{Chew}}
  name Blur1
  xpos -40
  ypos -283
  addUserKnob {20 User}
  addUserKnob {14 Chew R -300 300}
 }
set N26ff40f0 [stack 0]
 ColorLookup {
  channels alpha
  lut {master {}
    red {}
    green {}
    blue {}
    alpha {curve 0 x0.400000006 1 x0.6000000238 1 x1 0}}
  name ColorLookupEdge1
  xpos -164
  ypos -188
  addUserKnob {20 User}
  addUserKnob {7 outsideTCL}
  outsideTCL {{"\[animation lut.alpha x 1 \[value outside]]"}}
  addUserKnob {7 outside}
  outside 0.4
  addUserKnob {7 inside}
  inside 0.6
  addUserKnob {7 insideTCL}
  insideTCL {{"\[animation lut.alpha x 2 \[value inside]]"}}
 }
push $N26ff40f0
 Switch {
  inputs 2
  which {{edgeMatte}}
  name SwitchEdge
  xpos -54
  ypos -182
  addUserKnob {20 User}
  addUserKnob {6 edgeMatte l "edge matte" +STARTLINE}
 }
 Dot {
  name Dot3
  xpos -20
  ypos -149
 }
set N26ff47d0 [stack 0]
push $N26ff47d0
 Invert {
  channels alpha
  name Invert1
  xpos 104
  ypos -98
 }
 Switch {
  inputs 2
  which {{step(1,Blur1.size)}}
  name Switch1
  xpos 68
  ypos -32
 }
 Multiply {
  channels alpha
  value {{max((abs(Blur1.size))*1.5,1)}}
  name Multiply1
  xpos 54
  ypos 11
 }
 Add {
  channels alpha
  value -1
  name Add1
  xpos 141
  ypos 62
 }
 Multiply {
  channels alpha
  value 0.065
  name Multiply2
  xpos 141
  ypos 102
 }
 Add {
  channels alpha
  value 1
  name Add2
  xpos 141
  ypos 149
 }
 Gamma {
  channels alpha
  value {{Blur1.size/10000}}
  name Gamma1
  xpos -6
  ypos 149
 }
set N43eb4840 [stack 0]
push $N26ff47d0
push $N43eb4840
 Merge2 {
  inputs 2
  operation minus
  Achannels alpha
  Bchannels alpha
  output alpha
  name Min
  xpos 58
  ypos 358
 }
 Switch {
  inputs 2
  which {{step(1,Blur1.size) i}}
  name Switch2
  xpos -45
  ypos 571
 }
 Clamp {
  channels alpha
  name Clamp5
  xpos -45
  ypos 595
 }
 Blur {
  channels rgba
  size 25
  crop false
  name Blur11
  xpos -45
  ypos 647
 }
push $N26ff3a10
add_layer {grapes grapes.red grapes.green grapes.blue grapes.alpha}
 Copy {
  inputs 2
  to0 grapes.alpha
  channels rgba
  name Copy1
  selected true
  xpos -343
  ypos 641
 }
 Output {
  name Output1
  xpos -328
  ypos 831
 }
end_group
